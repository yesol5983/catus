# ğŸ¯ ì‚¬ìš©ì í”Œë¡œìš° ëª…ì„¸ì„œ

> Catus - ê°ì • ì¼ê¸° ì±—ë´‡ ì„œë¹„ìŠ¤

---

## 1. ì‹ ê·œ ì‚¬ìš©ì í”Œë¡œìš°

### ìµœì´ˆ ë¡œê·¸ì¸
```
LoginPage (/)
    â†“
[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸]
    â†“
ì¹´ì¹´ì˜¤ ì¸ì¦ (ì™¸ë¶€)
    â†“
KakaoCallbackPage
    â†“
POST /api/auth/kakao
    â†“
â”œâ”€ isNewUser: true â†’ ì˜¨ë³´ë”©
â””â”€ isNewUser: false â†’ HomePage
```

### ì˜¨ë³´ë”©
```
OnboardingPage
    â†“
[ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸(ì„ íƒ), ì¼ê¸°ì‹œê°„ ì…ë ¥]
    â†“
POST /api/auth/signup
    â†“
Onboarding
    â†“
[ì„±ë³„, ì—°ë ¹, ì§ì—…, ëª©ì  ì…ë ¥]
    â†“
HomePage â†’ Tutorial ìë™ ì‹œì‘
```

---

## 2. ì¼ìƒ ì‚¬ìš© í”Œë¡œìš°

### ì±„íŒ… ë° ì¼ê¸° ìƒì„±
```
HomePage
    â†“
"ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ì–´?" í´ë¦­
    â†“
ChatPage
    â†“
[AIì™€ ëŒ€í™”] â†’ IndexedDB ì €ì¥
    â†“
[ì €ë… - ì„¤ì • ì‹œê°„]
    â†“
"ì¼ê¸° ì“°ê¸° ì™„ë£Œ" ë²„íŠ¼
    â†“
DiaryRevealPage
    â†“
POST /api/diary/generate { date, chatLogs }
    â†“
ì¼ê¸° ìƒì„± ì™„ë£Œ (ì• ë‹ˆë©”ì´ì…˜)
    â†“
DiaryDetailPage
```

### IndexedDB ì €ì¥ íë¦„
```
ì‚¬ìš©ì ë©”ì‹œì§€ ì…ë ¥
    â†“
saveChatMessage(todayKey, userMessage, synced: false)
    â†“
POST /api/chat/message
    â†“
AI ì‘ë‹µ ìˆ˜ì‹ 
    â†“
saveChatMessage(todayKey, aiMessage, synced: false)
    â†“
[ì¼ê¸° ìƒì„± í›„]
    â†“
markMessagesAsSynced(todayKey)
```

---

## 3. ì¼ê¸° ê´€ë¦¬ í”Œë¡œìš°

### ìº˜ë¦°ë” ì¡°íšŒ
```
HomePage â†’ [ì¼ê¸°ì¥ ì•„ì´ì½˜]
    â†“
CalendarPage
    â†“
GET /api/diary/list?year&month
    â†“
ê°ì • ì´ëª¨ì§€ë¡œ ë‚ ì§œ í‘œì‹œ
    â”œâ”€ ğŸ˜Š í–‰ë³µ
    â”œâ”€ ğŸ˜¢ ìŠ¬í””
    â”œâ”€ ğŸ˜ ë³´í†µ
    â”œâ”€ ğŸ˜  í™”ë‚¨
    â””â”€ ğŸ˜° ë¶ˆì•ˆ
    â†“
[ë‚ ì§œ í´ë¦­]
    â†“
DiaryDetailPage
```

### ì¼ê¸° ìˆ˜ì •/ì‚­ì œ
```
DiaryDetailPage
    â†“
â”œâ”€ [ìˆ˜ì •] â†’ PUT /api/diary/{id}
â””â”€ [ì‚­ì œ] â†’ DELETE /api/diary/{id} â†’ CalendarPage
```

---

## 4. ìµëª… ë©”ì‹œì§€ í”Œë¡œìš°

### ëœë¤ ì¼ê¸° ë° ë©”ì‹œì§€ ì „ì†¡
```
HomePage â†’ [ê³ ì–‘ì´ "ë‹¬ì´" í´ë¦­]
    â†“
RandomDiaryPage
    â†“
GET /api/diary/random
    â†“
â”œâ”€ ì¼ê¸° ì—†ìŒ â†’ "ì•„ì§ ê³µìœ ëœ ì¼ê¸°ê°€ ì—†ì–´ìš” ğŸ˜¢"
â””â”€ ì¼ê¸° ìˆìŒ â†’ ì¼ê¸° í‘œì‹œ
        â†“
    [ì‘ì› ë©”ì‹œì§€ ë³´ë‚´ê¸°]
        â†“
    MessageModal (ìµœëŒ€ 100ì)
        â†“
    POST /api/message/send
        â†“
    "ì‘ì› ë©”ì‹œì§€ë¥¼ ì „ë‹¬í–ˆì–´ìš”! ğŸ˜Š"
```

### ë°›ì€ ë©”ì‹œì§€ í™•ì¸
```
HomePage
    â†“
[ìƒˆ ë©”ì‹œì§€ ë„ì°©]
    â†“
ì¢…ì´ë¹„í–‰ê¸° ë°°ì§€ í‘œì‹œ (unreadCount)
    â†“
ì¢…ì´ë¹„í–‰ê¸° ì• ë‹ˆë©”ì´ì…˜ (ìœ„ì•„ë˜)
    â†“
[ì¢…ì´ë¹„í–‰ê¸° í´ë¦­]
    â†“
LetterPage
    â†“
GET /api/message/received
    â†“
ë©”ì‹œì§€ ëª©ë¡ í‘œì‹œ
    â†“
setLastCheckedCount() â†’ ë°°ì§€ ìˆ¨ê¹€
```

---

## 5. ì„±ê²© ë¶„ì„ í”Œë¡œìš°

### BIG5 ì´ˆê¸° í…ŒìŠ¤íŠ¸
```
HomePage â†’ [ì„ ì¸ì¥ í´ë¦­]
    â†“
Big5StatsPage
    â†“
GET /api/big5/current
    â†“
â”œâ”€ ì ìˆ˜ ì—†ìŒ â†’ "ê²€ì‚¬ ì‹œì‘í•˜ê¸°"
â””â”€ ì ìˆ˜ ìˆìŒ â†’ í†µê³„ í™”ë©´
        â†“
    Big5TestPage
        â†“
    [10ê°œ ì§ˆë¬¸ 5ì  ì²™ë„]
        â”œâ”€ ê°œë°©ì„± 2ë¬¸í•­
        â”œâ”€ ì„±ì‹¤ì„± 2ë¬¸í•­
        â”œâ”€ ì™¸í–¥ì„± 2ë¬¸í•­
        â”œâ”€ ì¹œí™”ì„± 2ë¬¸í•­
        â””â”€ ì‹ ê²½ì„± 2ë¬¸í•­
        â†“
    ì§„í–‰ë¥  ë°” (10% â†’ 100%)
        â†“
    POST /api/big5/initial { answers[] }
        â†“
    Big5StatsPage (ìë™ ì´ë™)
```

### BIG5 í†µê³„ í™•ì¸
```
Big5StatsPage
    â†“
GET /api/big5/current
    â†“
5ê°€ì§€ íŠ¹ì„± í”„ë¡œê·¸ë ˆìŠ¤ ë°”
    â”œâ”€ ê°œë°©ì„± (ë¹¨ê°•)
    â”œâ”€ ì„±ì‹¤ì„± (ì²­ë¡)
    â”œâ”€ ì™¸í–¥ì„± (ë…¸ë‘)
    â”œâ”€ ì¹œí™”ì„± (ë¯¼íŠ¸)
    â””â”€ ì‹ ê²½ì„± (ë³´ë¼)
    â†“
ìë™ ì—…ë°ì´íŠ¸ ì•ˆë‚´
"ë§¤ì£¼ ìë™ ì—…ë°ì´íŠ¸ (ìµœëŒ€ 0.15/week)"
```

---

## 6. ì„¤ì • ê´€ë¦¬ í”Œë¡œìš°

### ì„¤ì • ë³€ê²½
```
HomePage â†’ [ì„¤ì • ì•„ì´ì½˜]
    â†“
SettingsPage
    â†“
GET /api/settings
    â†“
â”œâ”€ ì¼ê¸° ì‹œê°„ â†’ PUT /api/settings/diary-time
â”œâ”€ ì•Œë¦¼ ì„¤ì • â†’ PUT /api/settings/notifications
â”œâ”€ ë‹¤í¬ëª¨ë“œ â†’ PUT /api/settings/theme
â””â”€ í”„ë¡œí•„ â†’ PUT /api/settings/profile
```

### íšŒì› íƒˆí‡´
```
SettingsPage
    â†“
[íšŒì› íƒˆí‡´ ë²„íŠ¼]
    â†“
WithdrawModal
    â†“
"ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
    â†“
[ë¹„ë°€ë²ˆí˜¸ ì…ë ¥] (ì„¤ì •í•œ ê²½ìš°)
    â†“
DELETE /api/auth/withdraw
    â†“
localStorage.clear()
indexedDB.deleteDatabase('CatusDB')
    â†“
LoginPage
```

---

## 7. ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°

### ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
```
API ìš”ì²­ ì‹¤íŒ¨
    â†“
"ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”"
    â†“
[ì¬ì‹œë„ ë²„íŠ¼]
```

### ì¸ì¦ ë§Œë£Œ
```
API 401 ì‘ë‹µ
    â†“
Axios ì¸í„°ì…‰í„°
    â†“
localStorage.removeItem('catus_access_token')
    â†“
window.location.href = '/'
    â†“
"ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤"
```

### ì„œë²„ ì˜¤ë¥˜
```
API 500 ì‘ë‹µ
    â†“
"ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
    â†“
React Query ìë™ ì¬ì‹œë„ (1íšŒ)
```

---

## 8. íŠ¹ìˆ˜ í”Œë¡œìš°

### ìë™ ë¡œê·¸ì¸
```
ì•± ì ‘ì† (/)
    â†“
AuthContext ì´ˆê¸°í™”
    â†“
localStorage.getItem('catus_access_token')
    â†“
â”œâ”€ í† í° ìˆìŒ â†’ HomePage ìë™ ì´ë™
â””â”€ í† í° ì—†ìŒ â†’ LoginPage ìœ ì§€
```

### í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
```
ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨
    â†“
React ì•± ì¬ì´ˆê¸°í™”
    â†“
â”œâ”€ AuthContext â†’ í† í° ë³µì›
â”œâ”€ DarkModeContext â†’ ë‹¤í¬ëª¨ë“œ ë³µì›
â”œâ”€ TutorialContext â†’ íŠœí† ë¦¬ì–¼ ìƒíƒœ ë³µì›
â””â”€ ChatPage â†’ IndexedDB ë©”ì‹œì§€ ë³µì›
```

---

## 9. ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤

### Day 1 (ì‹ ê·œ ì‚¬ìš©ì)
```
1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
2. ì˜¨ë³´ë”© (ë‹‰ë„¤ì„, ì¼ê¸° ì‹œê°„)
3. í™ˆ íŠœí† ë¦¬ì–¼
4. ì±„íŒ… ì‹œì‘
5. ì €ë… ì¼ê¸° ìƒì„±
6. BIG5 í…ŒìŠ¤íŠ¸
```

### Day 7 (ì¼ìƒ ì‚¬ìš©)
```
1. ìë™ ë¡œê·¸ì¸
2. ì±„íŒ…
3. ì¼ê¸° í™•ì¸
4. ì‘ì› ë©”ì‹œì§€ í™•ì¸
5. ì§€ë‚œ ì¼ê¸° ì¡°íšŒ
```

### ìµëª… êµë¥˜
```
1. ê³ ì–‘ì´ í´ë¦­
2. ëœë¤ ì¼ê¸° ì¡°íšŒ
3. ì‘ì› ë©”ì‹œì§€ ì „ì†¡
4. ë‚´ ì¼ê¸°ì— ë©”ì‹œì§€ ë„ì°©
5. ì¢…ì´ë¹„í–‰ê¸° ë°°ì§€ í™•ì¸
6. ë©”ì‹œì§€ ì½ê¸°
```

---

## 10. í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginPage   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ ì‹ ê·œ â†’ OnboardingPage â†’ HomePage (Tutorial)
       â””â”€ ê¸°ì¡´ â†’ HomePage
                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚           â”‚
  ChatPage   CalendarPage  Big5TestPage
      â”‚           â”‚           â”‚
 IndexedDB   DiaryDetail  Big5Stats

DiaryReveal  RandomDiary
      â”‚           â”‚
DiaryDetail  LetterPage
```

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •**: 2025-01-21
